!function(s,t){"use strict";var n="auto-complete",u=!1;function o(t,e){this.element=s(t),this.options=s.extend({},s.fn[n].defaults,this.element.data(),e),this.input=this.element.find("input[name=q]"),this.list=this.element.find("[auto-complete-res]"),this.timeout=null,this.init()}o.prototype={init:function(){var n=this,o=this.options;n.input.on(o.event,function(t){if(38===t.keyCode||40===t.keyCode)return n.select(t.keyCode);clearTimeout(n.timeout),n.timeout=setTimeout(function(){var e,t,i;t=o,i=(e=n).input.val(),u||""===i||(u=!0,s.ajax({url:"/search?q=filter=((collectionid:product>=0)&&(title:product**"+i+"))&view="+t.view,success:function(t){e.list.html(t).show(),u=!1},error:function(t,e,i){console.log(i),u=!1}}))},o.delay)}),n.input.blur(function(){n.list.slideUp()})},select:function(t){var e=this.list.find("li"),i=this.list.find(".active").index(),n=e.length;return 38===t&&(-1===i||0===i?i=n-1:i-=1),40===t&&(-1===i||i===n-1?i=0:i+=1),e.removeClass("active"),e.eq(i).addClass("active"),this.input.val(e.eq(i).data("title")),!1},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(e,i){return this.each(function(){var t=s.data(this,n);t?t[e]&&t[e](i):s.data(this,n,new o(this,e))})},s.fn[n].defaults={event:"keyup",delay:500,view:"auto"},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window);